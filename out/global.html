<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>
      Global - Documentation
  </title>

  <link href="https://www.braintreepayments.com/images/favicon-ccda0b14.png" rel="icon" type="image/png">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

  <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
  <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
  

  

  <!-- start Mixpanel -->
  <script type="text/javascript">(function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("1919205b2da72e4da3b9b6639b444d59");</script>
  <!-- end Mixpanel -->
</head>

<body>
  <svg style="display: none;">
    <defs>
      <symbol id="linkIcon" fill="#706d77" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
          <path d="M0 0h24v24H0z" fill="none"/>
          <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
      </symbol>
    </defs>
  </svg>

  <input type="checkbox" id="nav-trigger" class="nav-trigger" />
  <label for="nav-trigger" class="navicon-button x">
    <div class="navicon"></div>
  </label>

  <label for="nav-trigger" class="overlay"></label>

  <div class="top-nav-wrapper">
    <ul>
      <li >
        <a href="index.html">
          
            <svg fill="#6D6D6D" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
              <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
              <path d="M0 0h24v24H0z" fill="none"/>
            </svg>
          
          
        </a>
      </li>

      

    </ul>
  </div>

  <nav>
    <h3 class="reference-title">
      Braintree SDK Client Reference
    </h3>

    

    <h3 id="global-nav">Global</h3><ul><li><a href="global.html#addContainerOfDoc">addContainerOfDoc</a></li><li><a href="global.html#addHyperlink2Doc">addHyperlink2Doc</a></li><li><a href="global.html#addItem">addItem</a></li><li><a href="global.html#addToArrayIfNotExist">addToArrayIfNotExist</a></li><li><a href="global.html#addToInMyPossession">addToInMyPossession</a></li><li><a href="global.html#arrayItemfoundInArray">arrayItemfoundInArray</a></li><li><a href="global.html#borrow_request">borrow_request</a></li><li><a href="global.html#checkIfContainerOfUpdate">checkIfContainerOfUpdate</a></li><li><a href="global.html#compareArrays">compareArrays</a></li><li><a href="global.html#copyGeoDataFromContainerToAllItemsInside">copyGeoDataFromContainerToAllItemsInside</a></li><li><a href="global.html#couch_getUserDB">couch_getUserDB</a></li><li><a href="global.html#DBCommander">DBCommander</a></li><li><a href="global.html#deleteContainerOf">deleteContainerOf</a></li><li><a href="global.html#deleteFromInMyPossession">deleteFromInMyPossession</a></li><li><a href="global.html#deleteItemCopies">deleteItemCopies</a></li><li><a href="global.html#deleteItems">deleteItems</a></li><li><a href="global.html#dingsCommander">dingsCommander</a></li><li><a href="global.html#fetch">fetch</a></li><li><a href="global.html#findItems">findItems</a></li><li><a href="global.html#fromHex">fromHex</a></li><li><a href="global.html#getCarnet">getCarnet</a></li><li><a href="global.html#getGeoDataFromContainer">getGeoDataFromContainer</a></li><li><a href="global.html#getNotificationsAsAdmin">getNotificationsAsAdmin</a></li><li><a href="global.html#getSessionAndAuthToken">getSessionAndAuthToken</a></li><li><a href="global.html#getTargetsFromUrl">getTargetsFromUrl</a></li><li><a href="global.html#handover">handover</a></li><li><a href="global.html#handover_announce">handover_announce</a></li><li><a href="global.html#handover_cancel">handover_cancel</a></li><li><a href="global.html#handover_deny">handover_deny</a></li><li><a href="global.html#insertItemCopies">insertItemCopies</a></li><li><a href="global.html#instanceCommander">instanceCommander</a></li><li><a href="global.html#makeMango">makeMango</a></li><li><a href="global.html#move">move</a></li><li><a href="global.html#pushRegister">pushRegister</a></li><li><a href="global.html#pushSend">pushSend</a></li><li><a href="global.html#search">search</a></li><li><a href="global.html#sendPushToUser">sendPushToUser</a></li><li><a href="global.html#toHex">toHex</a></li><li><a href="global.html#trimFloatStringToNDecimalPlaces">trimFloatStringToNDecimalPlaces</a></li><li><a href="global.html#trimTrailingSlashes">trimTrailingSlashes</a></li><li><a href="global.html#update">update</a></li><li><a href="global.html#updateContainerOf">updateContainerOf</a></li><li><a href="global.html#updatePublicDBIfPublic">updatePublicDBIfPublic</a></li><li><a href="global.html#validateReadRights">validateReadRights</a></li><li><a href="global.html#verifyAuthToken">verifyAuthToken</a></li><li><a href="global.html#verifyByJsonPW">verifyByJsonPW</a></li><li><a href="global.html#verifyByUrlPW">verifyByUrlPW</a></li><li><a href="global.html#verifyUserCredibility">verifyUserCredibility</a></li></ul>
  </nav>

  <div id="main">
    
      <h1 class="page-title">
        Global
      </h1>
    

    

<section>
  <header>
    
      <h2>
        
        
        
      </h2>

      
    
  </header>

  <article>
    <div class="container-overview">
      
        

        

<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
</dl>


        
      
    </div>

    

    

    

     

    

    

    
      <h3 class="subsection-title">Methods</h3>

      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#addContainerOfDoc">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="addContainerOfDoc">
      <span class="type-signature"></span>addContainerOfDoc<span class="signature">(req, target, thingInside<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span>
    </h4>
  </span>

  



  <div class="description">
    database level helper function.<br>
creates new -containerOf sister doc to target doc.<br><br>
only for compability:<br>
tries to add an empty and fresh -containerOf doc to already existing doc
needed in case of problems while add and (main reason:) in case a doc was
added to dingsda before -containerOf became it's own doc on creation of every doc
could also be solved instead by a one time recursion over all docs in all userdbs
but this way seemed less intrusive and hard to code
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      
        <th>Attributes</th>
      

      
        <th>Default</th>
      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>req</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        
          <td class="attributes">
            

            

            
          </td>
        

        
          <td class="default">
            
          </td>
        

        <td class="description last">
          request object from express app
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>target</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      string
    </span>

    


          
        </td>

        
          <td class="attributes">
            

            

            
          </td>
        

        
          <td class="default">
            
          </td>
        

        <td class="description last">
          _id of doc whose -containerOf sister doc to be created
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>thingInside</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      string
    </span>

    


          
        </td>

        
          <td class="attributes">
            
              &lt;optional><br>
            

            

            
          </td>
        

        
          <td class="default">
            
              []
            
          </td>
        

        <td class="description last">
          array of ids of docs which should be added into
<target>-containerOf
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line2340">line 2340</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#addHyperlink2Doc">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="addHyperlink2Doc">
      <span class="type-signature"></span>addHyperlink2Doc<span class="signature">(req, doc)</span><span class="type-signature"> &rarr; {Object}</span>
    </h4>
  </span>

  



  <div class="description">
    helper function.<br>
uses request and doc to create valid .hyperlink field and add it to doc provided
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>req</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          request object from express app
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>doc</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          doc to add .hyperlink to
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line2201">line 2201</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#addItem">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="addItem">
      <span class="type-signature"></span>addItem<span class="signature">(req, res)</span><span class="type-signature"> &rarr; {Object|string}</span>
    </h4>
  </span>

  



  <div class="description">
    database level function.<br>
adds item defined in requests payload to users Database.<br>
<br>
assigns uuid as _id, adds timestamp .created and other default fields to doc<br>
adds a second sister document named <id>-containerOf to DB<br>
adds itemCopies of new doc into public DBs if .other.visibility field of doc
requires that.
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>req</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          request object from express app
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>res</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          response object from express app
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line1971">line 1971</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#addToArrayIfNotExist">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="addToArrayIfNotExist">
      <span class="type-signature"></span>addToArrayIfNotExist<span class="signature">(array, item)</span><span class="type-signature"> &rarr; {Array}</span>
    </h4>
  </span>

  



  <div class="description">
    helper function
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>array</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Array
    </span>

    


          
        </td>

        

        

        <td class="description last">
          array to add item to
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>item</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Array
    </span>

    


          
        </td>

        

        

        <td class="description last">
          item to be added to array
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line3201">line 3201</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#addToInMyPossession">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="addToInMyPossession">
      <span class="type-signature"></span>addToInMyPossession<span class="signature">(db, itemHyperlink)</span><span class="type-signature"> &rarr; {Promise}</span>
    </h4>
  </span>

  



  <div class="description">
    helper function.<br>
adds doc ID into db Owners &inMyPossession doc (this is where all items not owned
by possesed by a user a referenced)<br>
sister function of <a href="global.html#deleteFromInMyPossession">deleteFromInMyPossession</a>
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>db</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          nano database instance
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>itemHyperlink</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      string
    </span>

    


          
        </td>

        

        

        <td class="description last">
          .hyperlink field from item/doc to be written
into inMyPossession
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line1285">line 1285</a>
        </li>
      </ul>
    </dd>
  

  

  

  
    <dt class="tag-todo">To Do:</dt>
    <dd class="tag-todo">
      <ul>
        
          <li>
            change after &inMyPossession doc became databases
          </li>
        
      </ul>
    </dd>
  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#arrayItemfoundInArray">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="arrayItemfoundInArray">
      <span class="type-signature"></span>arrayItemfoundInArray<span class="signature">(itemArray, array)</span><span class="type-signature"> &rarr; {boolean}</span>
    </h4>
  </span>

  



  <div class="description">
    helper function<br>
returns true if any of the items in itemArray are found in array
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>itemArray</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Array
    </span>

    


          
        </td>

        

        

        <td class="description last">
          array of objects of which every item should be checked
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>array</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Array
    </span>

    


          
        </td>

        

        

        <td class="description last">
          array to be checked for matches with itemArray
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line2845">line 2845</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#borrow_request">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="borrow_request">
      <span class="type-signature"></span>borrow_request<span class="signature">(req, res)</span><span class="type-signature"> &rarr; {Object|string}</span>
    </h4>
  </span>

  



  <div class="description">
    database level function.<br>
writes a borrow request notification into target user (defined by request
url) database's &notifications doc.<br>
includes infos from &config doc of user sending.
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>req</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          request object from express app
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>res</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          response object from express app
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line1814">line 1814</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#checkIfContainerOfUpdate">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="checkIfContainerOfUpdate">
      <span class="type-signature"></span>checkIfContainerOfUpdate<span class="signature">()</span><span class="type-signature"></span>
    </h4>
  </span>

  



  <div class="description">
    helper function prechecking if update of containerOf is necessary.
if the case: updates via [@link updateContainerOf]
  </div>










<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line1417">line 1417</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#compareArrays">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="compareArrays">
      <span class="type-signature"></span>compareArrays<span class="signature">(array1, array2)</span><span class="type-signature"> &rarr; {boolean}</span>
    </h4>
  </span>

  



  <div class="description">
    helper function<br>
<br>
compares two arrays and returns if identical
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>array1</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Array
    </span>

    


          
        </td>

        

        

        <td class="description last">
          array to be tested
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>array2</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Array
    </span>

    


          
        </td>

        

        

        <td class="description last">
          array to be tested
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line3182">line 3182</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#copyGeoDataFromContainerToAllItemsInside">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="copyGeoDataFromContainerToAllItemsInside">
      <span class="type-signature"></span>copyGeoDataFromContainerToAllItemsInside<span class="signature">()</span><span class="type-signature"></span>
    </h4>
  </span>

  



  <div class="description">
    thing level helper function: takes geoData from container and copies it into all
docs listed in items -containerOf 's location field
  </div>










<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line1762">line 1762</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#couch_getUserDB">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="couch_getUserDB">
      <span class="type-signature"></span>couch_getUserDB<span class="signature">(req)</span><span class="type-signature"> &rarr; {Array}</span>
    </h4>
  </span>

  



  <div class="description">
    helper to extract Auth cookie from request and return couchDB nano instance and
a nano db instance of the same user<br>
<br>
couchdb-nano: https://github.com/apache/couchdb-nano
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>req</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          request object from express app
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line3097">line 3097</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#DBCommander">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="DBCommander">
      <span class="type-signature"></span>DBCommander<span class="signature">(req, res)</span><span class="type-signature"></span>
    </h4>
  </span>

  



  <div class="description">
    request handler. manages all incoming requests on database level.<br>
This means: all requests addressing a single database (most of the times a users DB)
<br><br>
checks for requests HTTP verb ( GET / POST ) as well as the requests JSON payload
and forwards request and response object to the different database level functions.
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>req</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          request object from express app
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>res</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          response object from express app
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line277">line 277</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#deleteContainerOf">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="deleteContainerOf">
      <span class="type-signature"></span>deleteContainerOf<span class="signature">(req, targetID)</span><span class="type-signature"></span>
    </h4>
  </span>

  



  <div class="description">
    database level helper function.<br>
deletes -containerOf sister document of targetID
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>req</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          request object from express app
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>targetID</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          _id of doc whose -containerOf sister doc to be deleted
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line2175">line 2175</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#deleteFromInMyPossession">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="deleteFromInMyPossession">
      <span class="type-signature"></span>deleteFromInMyPossession<span class="signature">(db, itemHyperlink)</span><span class="type-signature"> &rarr; {Promise}</span>
    </h4>
  </span>

  



  <div class="description">
    helper function.<br>
removes doc ID from db Owners &inMyPossession doc<br>
sister function of <a href="global.html#addToInMyPossession">addToInMyPossession</a>
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>db</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          nano database instance
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>itemHyperlink</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      string
    </span>

    


          
        </td>

        

        

        <td class="description last">
          .hyperlink field from item/doc to be written
into inMyPossession
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line1310">line 1310</a>
        </li>
      </ul>
    </dd>
  

  

  

  
    <dt class="tag-todo">To Do:</dt>
    <dd class="tag-todo">
      <ul>
        
          <li>
            change after &inMyPossession doc became databases
          </li>
        
      </ul>
    </dd>
  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#deleteItemCopies">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="deleteItemCopies">
      <span class="type-signature"></span>deleteItemCopies<span class="signature">(req, nanoUser, oldDoc<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {Object|string}</span>
    </h4>
  </span>

  



  <div class="description">
    database level helper function.<br>
deletes all copies of doc defined in requests url from this instance's public DB
<br><br>
sister function of <a href="global.html#insertItemCopies">insertItemCopies</a>
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      
        <th>Attributes</th>
      

      
        <th>Default</th>
      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>req</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        
          <td class="attributes">
            

            

            
          </td>
        

        
          <td class="default">
            
          </td>
        

        <td class="description last">
          request object from express app
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>nanoUser</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        
          <td class="attributes">
            

            

            
          </td>
        

        
          <td class="default">
            
          </td>
        

        <td class="description last">
          nano instance for the user for whom we called this function
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>oldDoc</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        
          <td class="attributes">
            
              &lt;optional><br>
            

            

            
          </td>
        

        
          <td class="default">
            
              {other:{visibility:[]}}
            
          </td>
        

        <td class="description last">
          oldDoc PROBABLY NOT NEEDED
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line1880">line 1880</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#deleteItems">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="deleteItems">
      <span class="type-signature"></span>deleteItems<span class="signature">(req, res)</span><span class="type-signature"> &rarr; {Object|string}</span>
    </h4>
  </span>

  



  <div class="description">
    database level function.<br>
deletes single item in Database defined by request url<br>
<br>
after deletion of target doc, also attempts to delete all copies of this doc within
publicDBs as well as docs sister doc <id>-containerOf
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>req</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          request object from express app
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>res</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          response object from express app
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line2132">line 2132</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#dingsCommander">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="dingsCommander">
      <span class="type-signature"></span>dingsCommander<span class="signature">(req, res)</span><span class="type-signature"></span>
    </h4>
  </span>

  



  <div class="description">
    request handler. manages all incoming requests on thing level.<br>
This means: all requests addressing only a single item/doc in the database<br>
<br>
checks for requests HTTP verb ( GET / POST ) as well as the requests JSON payload
and forwards request and response object to the different thinglevel document
functions.
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>req</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          request object from express app
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>res</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          response object from express app
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line216">line 216</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#fetch">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="fetch">
      <span class="type-signature"></span>fetch<span class="signature">(req, res)</span><span class="type-signature"> &rarr; {Object}</span>
    </h4>
  </span>

  



  <div class="description">
    thing level function.<br>
gets item requested by request url target ID (https:xxx/api/v1/xxxx/ID/xxxxx) from database
if an attachment is also requested via request url (https:xxx/api/v1/xxxxx/xxxx/ATTACHMENT)
the attachment is added to the response payload instead of document
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>req</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          request object from express app
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>res</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          response object from express app
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line428">line 428</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#findItems">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="findItems">
      <span class="type-signature"></span>findItems<span class="signature">(req, res)</span><span class="type-signature"> &rarr; {Object|string}</span>
    </h4>
  </span>

  



  <div class="description">
    database level function.<br>
searches for items in Database defined by request url and returns list of items
with most relevant fields of found docs/items.<br>
uses <a href="global.html#makeMango">makeMango</a> to build a mango style search query to couchDBs find API<br>
expects a payload .data.doc with all fields that should be included in the search.
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>req</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          request object from express app
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>res</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          response object from express app
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line2068">line 2068</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#fromHex">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="fromHex">
      <span class="type-signature"></span>fromHex<span class="signature">(h)</span><span class="type-signature"></span>
    </h4>
  </span>

  



  <div class="description">
    helper function<br>
<br>
turns Hex value to string
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>h</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      string
    </span>

    


          
        </td>

        

        

        <td class="description last">
          hex value to be turned to string
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line3166">line 3166</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#getCarnet">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="getCarnet">
      <span class="type-signature"></span>getCarnet<span class="signature">(req, res)</span><span class="type-signature"> &rarr; {string|Object}</span>
    </h4>
  </span>

  



  <div class="description">
    database level function.<br>
gets userDBs carnetATA view from couchDB which should return a csv formatted for
the international customs form Carnet A.T.A and sends response including the csv
string or an json prepared for client side conversion to pdf into responses payload.
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>req</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          request object from express app
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>res</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          response object from express app
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line2413">line 2413</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#getGeoDataFromContainer">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="getGeoDataFromContainer">
      <span class="type-signature"></span>getGeoDataFromContainer<span class="signature">()</span><span class="type-signature"></span>
    </h4>
  </span>

  



  <div class="description">
    thing level helper function: gets container of thing (value of location.insideOf)
and returns it's geolocation or undefined via promise resolve
  </div>










<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line1724">line 1724</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#getNotificationsAsAdmin">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="getNotificationsAsAdmin">
      <span class="type-signature"></span>getNotificationsAsAdmin<span class="signature">()</span><span class="type-signature"></span>
    </h4>
  </span>

  



  <div class="description">
    helper: gets all docs from userDB-notifications and returns a promise of the
databases response
  </div>










<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line528">line 528</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#getSessionAndAuthToken">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="getSessionAndAuthToken">
      <span class="type-signature"></span>getSessionAndAuthToken<span class="signature">(req, res, next, username, password)</span><span class="type-signature"></span>
    </h4>
  </span>

  



  <div class="description">
    express middleware helper function.<br>
<br>
requests _session from couchDB using username and password and adds AuthSession
cookie from couchDB response to the response object so user will be able to
authenticate with cookie next time.
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>req</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          request object from express app
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>res</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          response object from express app
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>next</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      function
    </span>

    


          
        </td>

        

        

        <td class="description last">
          callback for express middleware functions
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>username</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      string
    </span>

    


          
        </td>

        

        

        <td class="description last">
          username
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>password</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      string
    </span>

    


          
        </td>

        

        

        <td class="description last">
          password
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line2980">line 2980</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#getTargetsFromUrl">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="getTargetsFromUrl">
      <span class="type-signature"></span>getTargetsFromUrl<span class="signature">(target)</span><span class="type-signature"> &rarr; {Array}</span>
    </h4>
  </span>

  



  <div class="description">
    helper function.<br>
splits a request url into an array of "targets" defined by the url.<br>
this is helpful to later quickly find out which database and/or thing and/or attachment
is addressed by a request.<br>
the order of the returned Array defines which level the target addresses:<br>
<li>targets[0] is database level
<li>targets[1] is thing level
<li>targets[2] is attachment level (atm handled in thinglevel as well)
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>target</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      string
    </span>

    


          
        </td>

        

        

        <td class="description last">
          url to be split into targets of request
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line2391">line 2391</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#handover">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="handover">
      <span class="type-signature"></span>handover<span class="signature">(req, res)</span><span class="type-signature"> &rarr; {Object|string}</span>
    </h4>
  </span>

  



  <div class="description">
    thing level function.<br>
confirms an announced handover set in <a href="global.html#handover_announce">handover_announce</a>.<br>
deletes notification entries with item reference defined by request payload .data.ref
from &notifications doc of user sending as well as user defined by request payload
.data.from<br>
writes into &inMyPossession doc of user sending request<br>
writes username of new possessor into doc in questions field .inPossessionOf
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>req</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          request object from express app
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>res</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          response object from express app
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line973">line 973</a>
        </li>
      </ul>
    </dd>
  

  

  

  
    <dt class="tag-todo">To Do:</dt>
    <dd class="tag-todo">
      <ul>
        
          <li>
            change after &notifications and &inMyPossession docs became databases
          </li>
        
      </ul>
    </dd>
  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#handover_announce">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="handover_announce">
      <span class="type-signature"></span>handover_announce<span class="signature">(req, res)</span><span class="type-signature"> &rarr; {Object}</span>
    </h4>
  </span>

  



  <div class="description">
    thing level function.<br>
announces the handover of a phyisical thing from the user sending the request to
another user (defined in req payload .data.username).<br>
writes notifications into &notifications doc of user sending the request as well
as into &notifications doc of user that is allegedely receiving the item defined
by url path of request (target[1])
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>req</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          request object from express app
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>res</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          response object from express app
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line551">line 551</a>
        </li>
      </ul>
    </dd>
  

  

  

  
    <dt class="tag-todo">To Do:</dt>
    <dd class="tag-todo">
      <ul>
        
          <li>
            change after &notifications doc became &notifications database
          </li>
        
      </ul>
    </dd>
  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#handover_cancel">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="handover_cancel">
      <span class="type-signature"></span>handover_cancel<span class="signature">(req, res)</span><span class="type-signature"> &rarr; {Object}</span>
    </h4>
  </span>

  



  <div class="description">
    DB level function.<br>
cancels an announced handover set in <a href="global.html#handover_announce">handover_announce</a>.<br>
deletes notification entries with item reference defined by request payload .data.ref
from &notifications doc of user sending as well as user defined by request payload .data.to
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>req</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          request object from express app
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>res</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          response object from express app
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line749">line 749</a>
        </li>
      </ul>
    </dd>
  

  

  

  
    <dt class="tag-todo">To Do:</dt>
    <dd class="tag-todo">
      <ul>
        
          <li>
            change after &notifications doc became &notifications database
          </li>
        
      </ul>
    </dd>
  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#handover_deny">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="handover_deny">
      <span class="type-signature"></span>handover_deny<span class="signature">(req, res)</span><span class="type-signature"> &rarr; {Object}</span>
    </h4>
  </span>

  



  <div class="description">
    thing level function.<br>
denies an announced handover set in <a href="global.html#handover_announce">handover_announce</a>.<br>
deletes notification entries with item reference defined by request payload .data.ref
from &notifications doc of user sending as well as user defined by request payload .data.from
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>req</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          request object from express app
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>res</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          response object from express app
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line859">line 859</a>
        </li>
      </ul>
    </dd>
  

  

  

  
    <dt class="tag-todo">To Do:</dt>
    <dd class="tag-todo">
      <ul>
        
          <li>
            change after &notifications doc became &notifications database
          </li>
        
      </ul>
    </dd>
  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#insertItemCopies">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="insertItemCopies">
      <span class="type-signature"></span>insertItemCopies<span class="signature">(req, nanoUser, oldDoc<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {Object|string}</span>
    </h4>
  </span>

  



  <div class="description">
    database level helper function.<br>
inserts a copy of doc defined in requests url from this instance's public DB
<br><br>
sister function of <a href="global.html#deleteItemCopies">deleteItemCopies</a>
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      
        <th>Attributes</th>
      

      
        <th>Default</th>
      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>req</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        
          <td class="attributes">
            

            

            
          </td>
        

        
          <td class="default">
            
          </td>
        

        <td class="description last">
          request object from express app
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>nanoUser</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        
          <td class="attributes">
            

            

            
          </td>
        

        
          <td class="default">
            
          </td>
        

        <td class="description last">
          nano instance for the user for whom we called this function
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>oldDoc</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        
          <td class="attributes">
            
              &lt;optional><br>
            

            

            
          </td>
        

        
          <td class="default">
            
              {other:{visibility:[]}}
            
          </td>
        

        <td class="description last">
          oldDoc doc to compare changes with
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line1921">line 1921</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#instanceCommander">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="instanceCommander">
      <span class="type-signature"></span>instanceCommander<span class="signature">(req, res)</span><span class="type-signature"></span>
    </h4>
  </span>

  



  <div class="description">
    request handler. manages all incoming requests on instance level.<br>
This means: all requests the complete server instance (e.g. https://dingsda.org:3000/api/v1/)
<br><br>
checks for requests HTTP verb ( GET / POST / DELETE ) as well as the requests JSON payload
and forwards request and response object to the different functions.
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>req</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          request object from express app
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>res</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          response object from express app
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line361">line 361</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#makeMango">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="makeMango">
      <span class="type-signature"></span>makeMango<span class="signature">(input, ids2ignore)</span><span class="type-signature"> &rarr; {Object}</span>
    </h4>
  </span>

  



  <div class="description">
    helper function.<br>
creates a mango styled find request for couchDB (see <a href="https://github.com/cloudant/mango">https://github.com/cloudant/mango</a>) from input and ids2ignore<br>
<br>
will make Mango using regex caseinsensitive for all provided input fields that
are strings and search with mango "$in" operator for all provided input fields
that are Arrays<br><br>
for more complex searches please check <a href="global.html#search">search</a>
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>input</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          object including all fields and values to be included in
search.
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>ids2ignore</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Array
    </span>

    


          
        </td>

        

        

        <td class="description last">
          array of strings of doc ids to be added as to be ignored
to the mango query
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line2503">line 2503</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#move">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="move">
      <span class="type-signature"></span>move<span class="signature">(req, res)</span><span class="type-signature"> &rarr; {Object|string}</span>
    </h4>
  </span>

  



  <div class="description">
    thing level function.<br>
updates doc.location in DB (both defined by request url) to new location defined
in requests payload .data.location.
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>req</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          request object from express app
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>res</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          response object from express app
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line1345">line 1345</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#pushRegister">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="pushRegister">
      <span class="type-signature"></span>pushRegister<span class="signature">()</span><span class="type-signature"></span>
    </h4>
  </span>

  



  <div class="description">
    the subscribe endpoint manages the first interaction/subscription of a user
it gets the subscription parameters from the push service of the users browser
and it takes the username send as url parameter to associate both and save them
to the Database (TODO)
  </div>










<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line3256">line 3256</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#pushSend">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="pushSend">
      <span class="type-signature"></span>pushSend<span class="signature">()</span><span class="type-signature"></span>
    </h4>
  </span>

  



  <div class="description">
    push endpoint for remote send of push.
TODO: only ADMIN should be able to use this!!!
this endpoint does the same as the webpush standalone module would do. it is not strictly needed,
but we might be happy about it later if we want to trigger push notifications from http and not
cli only
  </div>










<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line3278">line 3278</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#search">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="search">
      <span class="type-signature"></span>search<span class="signature">()</span><span class="type-signature"></span>
    </h4>
  </span>

  



  <div class="description">
    instance level function<br>
not yet implemented. <br>
should become function to make more complex (completely client made?) search queries
to database. either using map-reduce (meh) or mango queries<br>
<br>
for an already working and easier way to find items take a look at <a href="global.html#findItems">findItems</a>
  </div>










<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line2557">line 2557</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#sendPushToUser">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="sendPushToUser">
      <span class="type-signature"></span>sendPushToUser<span class="signature">()</span><span class="type-signature"></span>
    </h4>
  </span>

  



  <div class="description">
    sends a push message to a single user defined by their username in DB "webpush"
fetches Data from DB and uses data to address
  </div>










<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line3308">line 3308</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#toHex">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="toHex">
      <span class="type-signature"></span>toHex<span class="signature">(s)</span><span class="type-signature"></span>
    </h4>
  </span>

  



  <div class="description">
    helper function<br>
<br>
turns string to Hex value
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>s</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      string
    </span>

    


          
        </td>

        

        

        <td class="description last">
          string to be transformed
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line3149">line 3149</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#trimFloatStringToNDecimalPlaces">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="trimFloatStringToNDecimalPlaces">
      <span class="type-signature"></span>trimFloatStringToNDecimalPlaces<span class="signature">(num, decimals)</span><span class="type-signature"> &rarr; {string}</span>
    </h4>
  </span>

  



  <div class="description">
    helper function
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      
        <th>Default</th>
      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>num</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      string
    </span>

    


          
        </td>

        

        
          <td class="default">
            
          </td>
        

        <td class="description last">
          float as string to be trimmed
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>decimals</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      number
    </span>

    


          
        </td>

        

        
          <td class="default">
            
              3
            
          </td>
        

        <td class="description last">
          number of decimals to cut num to.
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line3212">line 3212</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#trimTrailingSlashes">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="trimTrailingSlashes">
      <span class="type-signature"></span>trimTrailingSlashes<span class="signature">(input)</span><span class="type-signature"> &rarr; {string}</span>
    </h4>
  </span>

  



  <div class="description">
    helper function
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>input</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      string
    </span>

    


          
        </td>

        

        

        <td class="description last">
          string to trim slashes from
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line3221">line 3221</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#update">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="update">
      <span class="type-signature"></span>update<span class="signature">(req, res)</span><span class="type-signature"> &rarr; {Object|string}</span>
    </h4>
  </span>

  



  <div class="description">
    thing level function.<br>
updates doc in DB (both defined by request url)<br>
<br>
fetched oldDoc, compares and merges oldDoc and .data.doc (from request payload),
calls <a href="global.html#updateContainerOf">updateContainerOf</a> if locationInsideOf is present in .data.doc, updates
publicDB(s) if .data.other.visibility indicates public Read Rights (via
{@dlink eleteItemCopies} and <a href="global.html#insertItemCopies">insertItemCopies</a>) and finally inserts new merged doc
into DB.
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>req</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          request object from express app
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>res</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          response object from express app
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line1497">line 1497</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#updateContainerOf">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="updateContainerOf">
      <span class="type-signature"></span>updateContainerOf<span class="signature">(req, target, thingInside, authCookie, delete_it, callback)</span><span class="type-signature"></span>
    </h4>
  </span>

  



  <div class="description">
    database level helper function.<br>
updates -containerOf sister doc of target by adding thingInside to its
.containerOf field via <a href="global.html#addContainerOfDoc">addContainerOfDoc</a><br>
If delete_it flag is set true, will delete item instead of adding it.
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      
        <th>Default</th>
      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>req</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        
          <td class="default">
            
          </td>
        

        <td class="description last">
          request object from express app
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>target</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      string
    </span>

    


          
        </td>

        

        
          <td class="default">
            
          </td>
        

        <td class="description last">
          _id of doc whose -containerOf sister doc to be updated
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>thingInside</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      string
    </span>

    


          
        </td>

        

        
          <td class="default">
            
          </td>
        

        <td class="description last">
          _id of doc which should be deleted or added to
target-containerOf
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>authCookie</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      string
    </span>

    


          
        </td>

        

        
          <td class="default">
            
          </td>
        

        <td class="description last">
          AuthSessionToken to be used as Auth in communication
with DB
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>delete_it</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      boolean
    </span>

    


          
        </td>

        

        
          <td class="default">
            
              false
            
          </td>
        

        <td class="description last">
          flag. if true thingInside will be removed from
<target>-containerOf
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>callback</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      callback
    </span>

    


          
        </td>

        

        
          <td class="default">
            
          </td>
        

        <td class="description last">
          callback. will get true or false depending on success or not
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line2230">line 2230</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#updatePublicDBIfPublic">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="updatePublicDBIfPublic">
      <span class="type-signature"></span>updatePublicDBIfPublic<span class="signature">(req, doc)</span><span class="type-signature"></span>
    </h4>
  </span>

  



  <div class="description">
    database level helper function.<br>
checks if .other.visibility of doc is public and if so deletes and inserts copies
of the doc into this instance's public database via <a href="global.html#deleteItemCopies">deleteItemCopies</a> and
<a href="global.html#insertItemCopies">insertItemCopies</a>
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>req</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          request object from express app
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>doc</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          document object including the document to be updated inside
of public DB
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line1857">line 1857</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#validateReadRights">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="validateReadRights">
      <span class="type-signature"></span>validateReadRights<span class="signature">(req, res, next)</span><span class="type-signature"></span>
    </h4>
  </span>

  



  <div class="description">
    express middleware function.<br>
<br>
validates read permissions of a request.<br>
checks first how deep the request goes (meaning: if it is targeting the instance,
userDatabase or a specific document/thing/item inside of the database) by checking
the targets in request url.<br>
for requests to thinglevel or deeper it checks by going through the following steps:
<br>
<li>1.) is req.username trying to read her own DB? --> READ GRANTED
<li>2.) is req.username in thing.owners? --> READ GRANTED
<li>3.) is thing.visibility === "public"? --> READ GRANTED

<li>4.) is req.username in thing.inPossessionOf (because owner borrowed it
out)? --> READ GRANTED

<li>5.) is thing.visibility !== "private" && userdb-<targetuser>._security.
<thing.other.visibility> does contain req.username? --> READ GRANTED

<li>6.) (HARDEST maybe future science) (TO BE DONE):
is thing.visibility === "friends2nd" && req.username is in friends
of anybody who has <targetuser> in their userdb-<user>._security.friends
list? --> READ GRANTED
(unclear how to approach. So better first 1.-4. and this later)

<li>7.) ELSE: --> NO READ GRANTED --> no such object.
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>req</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          request object from express app
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>res</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          response object from express app
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>next</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      function
    </span>

    


          
        </td>

        

        

        <td class="description last">
          callback for express middleware functions
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line2634">line 2634</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#verifyAuthToken">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="verifyAuthToken">
      <span class="type-signature"></span>verifyAuthToken<span class="signature">(req, res, next)</span><span class="type-signature"></span>
    </h4>
  </span>

  



  <div class="description">
    express middleware function.<br>
<br>
verifies user Auth by using Cookie AuthSession provided in request.<br>
<br>
calls <a href="global.html#getSessionAndAuthToken">getSessionAndAuthToken</a>
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>req</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          request object from express app
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>res</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          response object from express app
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>next</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      function
    </span>

    


          
        </td>

        

        

        <td class="description last">
          callback for express middleware functions
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line3039">line 3039</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#verifyByJsonPW">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="verifyByJsonPW">
      <span class="type-signature"></span>verifyByJsonPW<span class="signature">(req, res, next)</span><span class="type-signature"></span>
    </h4>
  </span>

  



  <div class="description">
    express middleware helper function.<br>
<br>
verifies user Auth by testing for username and password inside of request payload.<br>
<br>
calls <a href="global.html#getSessionAndAuthToken">getSessionAndAuthToken</a>
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>req</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          request object from express app
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>res</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          response object from express app
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>next</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      function
    </span>

    


          
        </td>

        

        

        <td class="description last">
          callback for express middleware functions
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line2923">line 2923</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#verifyByUrlPW">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="verifyByUrlPW">
      <span class="type-signature"></span>verifyByUrlPW<span class="signature">(req, res, next)</span><span class="type-signature"></span>
    </h4>
  </span>

  



  <div class="description">
    express middleware helper function.<br>
<br>
verifies user Auth by testing for username and password inside of request query parameter.<br>
<br>
username and password can be query parameters or in json format inside of a query parameter
calles json. e.g.: https://xxx.xxx/yyy?username=aaa&password=bbb or
https://xxx.xxx/yyy?json='{"username":"aaa","password":"bbb"}'
<br>
calls <a href="global.html#getSessionAndAuthToken">getSessionAndAuthToken</a>
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>req</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          request object from express app
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>res</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          response object from express app
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>next</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      function
    </span>

    


          
        </td>

        

        

        <td class="description last">
          callback for express middleware functions
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line2943">line 2943</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#verifyUserCredibility">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id="verifyUserCredibility">
      <span class="type-signature"></span>verifyUserCredibility<span class="signature">(req, res, next)</span><span class="type-signature"></span>
    </h4>
  </span>

  



  <div class="description">
    express middleware function.<br>
<br>
decides how to verify user Auth<br>
<br>
calls <a href="global.html#verifyAuthToken">verifyAuthToken</a>, <a href="global.html#verifyByJsonPW">verifyByJsonPW</a> or <a href="global.html#verifyByUrlPW">verifyByUrlPW</a>
depending on request cookies, payload and/or HTTP method.

sends error response in case none of possible verification methods are provided
with request.
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>req</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          request object from express app
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>res</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          response object from express app
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>next</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      function
    </span>

    


          
        </td>

        

        

        <td class="description last">
          callback for express middleware functions
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="server.js.html">server.js</a>, <a href="server.js.html#line2876">line 2876</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
    

    

    
  </article>
</section>




  </div>

  <br class="clear">

  <footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a>
  </footer>

  <script src="scripts/linenumber.js"></script>
  <script src="scripts/pagelocation.js"></script>

  

</body>
</html>